build:
  gpu: true
  python_version: "3.10"
  # Install PyTorch early so that packages like tinycudann can build.
  # Cog’s base GPU image doesn’t include Torch by default.
  python_packages:
    - "torch==2.3.1"
    - "torchvision==0.18.1"
    - "torchaudio==2.3.1"
  system_packages:
    - "make"
    - "build-essential"
    - "libssl-dev"
    - "zlib1g-dev"
    - "libbz2-dev"
    - "libreadline-dev"
    - "libsqlite3-dev"
    - "wget"
    - "curl"
    - "llvm"
    - "libncurses5-dev"
    - "libncursesw5-dev"
    - "xz-utils"
    - "tk-dev"
    - "libffi-dev"
    - "liblzma-dev"
    - "git"
    - "ca-certificates"
    - "unzip"
    - "cmake"
    - "libgl1"
    - "libglib2.0-0"
    - "libjpeg-dev"
    - "libpng-dev"
    - "libboost-all-dev"
  run:
    - "chmod +x build.sh"
    - "./build.sh"

predict: "predict.py:Predictor"
